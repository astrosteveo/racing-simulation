{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -qE 'npm run test:run|vitest run'; then echo '\\nüß™ Tests completed!'; npm run test:status 2>/dev/null && echo '‚úÖ Test status auto-updated in STATUS.md and README.md' || echo '‚ö†Ô∏è  Run: npm run test:status (to update docs)'; fi"
          },
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -q 'git commit.*-m'; then COMMIT_MSG=$(echo \"$ARGUMENTS\" | sed -n \"s/.*-m ['\\\"]\\([^'\\\"]*\\)['\\\"].*/\\1/p\"); echo \"\\n‚úÖ Committed: $COMMIT_MSG\"; echo '\\nüìã Post-commit checklist:'; echo '   1. Update STATUS.md Recent Changes (latest commit)'; echo '   2. Run: npm run verify-docs (ensure sync)'; echo '   3. Update relevant specs/*/TASKS.md if needed'; fi"
          },
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -qE 'vitest.*\\.test\\.ts'; then TEST_FILE=$(echo \"$ARGUMENTS\" | grep -oP '[a-z-]+\\.test\\.ts' | head -1); echo \"\\nüî¨ Running $TEST_FILE\"; echo '\\nüí° TDD Workflow:'; echo '   ‚úÖ Write test ‚Üí See it fail (RED)'; echo '   ‚úÖ Write minimal code ‚Üí See it pass (GREEN)'; echo '   ‚úÖ Refactor ‚Üí Tests still pass'; echo '   ‚úÖ Commit ‚Üí Small, focused commit'; fi"
          },
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -qE 'sync-readme|test:status|sync-contracts'; then echo '\\nüìö Documentation updated!'; echo '\\nüí° Next: Run npm run verify-docs to check all sync'; fi"
          },
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -qE 'git (add|stage)'; then echo '\\nüì¶ Files staged for commit'; echo '\\nüí° Before committing:'; echo '   - Tests passing? npm run test:run'; echo '   - Docs updated? npm run verify-docs'; echo '   - Small commit? Review git diff --cached'; fi"
          },
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -q 'git push'; then echo '\\nüöÄ Pushed to remote!'; echo '\\nüìã Post-push checklist:'; echo '   - Update STATUS.md Recent Changes with pushed commits'; echo '   - Clear specs/*/TASKS.md Current Work sections'; echo '   - Update session notes if ending work'; fi"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "FILE_PATH=$(echo \"$ARGUMENTS\" | grep -oP 'src/[^\"]+\\.ts' | head -1); if [ -n \"$FILE_PATH\" ] && ! echo \"$FILE_PATH\" | grep -q 'test\\.ts'; then echo \"\\n‚ö†Ô∏è  WRITING: $FILE_PATH\"; echo '\\nüö¶ PROCESS GATE CHECKLIST:'; echo '   ‚ñ° Approved task exists in specs/*/TASKS.md?'; echo '   ‚ñ° Following TDD (test written first)?'; echo '   ‚ñ° Will update the spec TASKS.md after this?'; echo '\\nüí° Sustainable development = No code without planning!'; fi"
          },
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -qP 'src/.*\\.ts' && ! echo \"$ARGUMENTS\" | grep -q 'test\\.ts'; then FILE=$(echo \"$ARGUMENTS\" | grep -oP 'src/[^/]+/[^/]+\\.ts' | head -1 | xargs basename 2>/dev/null); if [ -n \"$FILE\" ]; then echo \"\\nüß™ New source file detected\"; echo '\\nüí° TDD Reminder: Have you written the test first?'; TEST_NAME=\"${FILE%.ts}.test.ts\"; echo \"   Expected test file: tests/unit/**/$TEST_NAME\"; fi; fi"
          },
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -q '\\.test\\.ts'; then TEST_FILE=$(echo \"$ARGUMENTS\" | grep -oP '[a-z-]+\\.test\\.ts' | head -1); echo \"\\n‚úÖ Test file created: $TEST_FILE\"; echo '\\nüí° TDD Next steps:'; echo \"   1. Run test: npx vitest $TEST_FILE\"; echo '   2. See it fail (RED - no implementation yet)'; echo '   3. Implement minimal code to pass'; echo '   4. See it pass (GREEN)'; echo '   5. Refactor if needed'; echo '   6. Commit atomic change'; fi"
          },
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -q 'src/types\\.ts'; then echo '\\nüìù WRITING CONTRACT DEFINITIONS (types.ts)'; echo '\\n‚ö†Ô∏è  Contract-First Development:'; echo '   1. Define interface first'; echo '   2. Update relevant specs/*/CONTRACTS.md'; echo '   3. Implement in code'; echo '   4. Run: npm run sync-contracts (verify sync)'; echo '\\nüí° Changed interfaces break implementations!'; fi"
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -q 'src/types\\.ts'; then echo '\\nüìù EDITED: src/types.ts (CONTRACT CHANGE)'; echo '\\n‚ö†Ô∏è  Interface changes impact:'; echo '   - All implementations using this interface'; echo '   - Relevant specs/*/CONTRACTS.md documentation'; echo '   - Test files validating the contract'; echo '\\nüîß Running contract sync check...'; npm run sync-contracts 2>/dev/null && echo '‚úÖ Contracts in sync!' || echo '‚ùå Contract sync issues detected - review output above'; fi"
          },
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -qP 'src/.*\\.ts' && ! echo \"$ARGUMENTS\" | grep -q 'types\\.ts'; then FILE=$(echo \"$ARGUMENTS\" | grep -oP 'src/[^\"]+\\.ts' | head -1); if [ -n \"$FILE\" ]; then echo \"\\n‚úèÔ∏è  EDITED: $FILE\"; echo '\\nüí° TDD Reminder:'; echo '   - Did you update the test first?'; echo '   - Run affected tests to verify change'; echo '   - Commit if tests pass'; fi; fi"
          },
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -qP 'specs/[^/]+/TASKS\\.md'; then SPEC=$(echo \"$ARGUMENTS\" | grep -oP 'specs/\\K[^/]+' | head -1); if [ -n \"$SPEC\" ]; then echo \"\\nüìã EDITED: specs/$SPEC/TASKS.md\"; echo '\\nüí° Task Management Reminder:'; echo '   - Mark tasks as in_progress when starting'; echo '   - Mark complete immediately when done'; echo '   - Update STATUS.md after milestones'; echo '   - Keep only 1 task in_progress at a time'; fi; fi"
          },
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -q 'TASKS\\.md'; then echo '\\nüìä After updating TASKS.md:'; echo '   - Is this a milestone? Update STATUS.md'; echo '   - Tests changed? Run npm run test:status'; echo '   - Session ending? Clear Current Work section'; fi"
          }
        ]
      },
      {
        "matcher": "Read",
        "hooks": [
          {
            "type": "command",
            "command": "if echo \"$ARGUMENTS\" | grep -q '\\.test\\.ts'; then TEST=$(echo \"$ARGUMENTS\" | grep -oP '[a-z-]+(?=\\.test\\.ts)' | head -1); if [ -n \"$TEST\" ]; then echo \"\\nüìñ Reading test: $TEST.test.ts\"; echo '\\nüí° Relevant files:'; echo \"   - Implementation: src/**/$TEST.ts\"; echo \"   - Spec: specs/*/SPEC.md (search for $TEST)\"; fi; fi"
          }
        ]
      }
    ]
  }
}
